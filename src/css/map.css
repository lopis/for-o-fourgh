.map {
  background-image: url('background.png');
  background-size: 100%;
  animation: map 2s infinite;
  height: calc(var(--pixel-size) * 64);
  width: calc(var(--pixel-size) * 64);
  image-rendering: pixelated;
  image-rendering: optimizespeed;
  position: relative;
  margin: auto;
  border: var(--pixel-size) solid #c4bfb0;
}

.map::after, .map::before {
	content: "";
	border: var(--pixel-size) solid #c4bfb0;
	position: absolute;
	left: calc(var(--pixel-size) * -2);
	width: calc(100% + 2 * var(--pixel-size));
	height: calc(100% - 2 * var(--pixel-size));
	z-index: -1;
}

.map::after {
	width: calc(100% - 2 * var(--pixel-size));
  height: calc(100% + 2 * var(--pixel-size));
  left: 0;
  top: calc(var(--pixel-size) * -2);
}

@keyframes map {
  0% {
    background-image: url('background.png');
  }
  50% {
    background-image: url(map_overlay.png), url(background.png);
  }
}

.map > span {
  position: absolute;
  display: flex;
  color: #504c40;
  text-transform: uppercase;
  font-weight: bold;
  min-height: calc(var(--pixel-size) * 9);
}

.map .text {
	position: absolute;
	bottom: calc(var(--pixel-size) * -3);
}

.bank {
  bottom: calc(var(--pixel-size) * 4);
  left: calc(var(--pixel-size) * 4);
}

.court {
  bottom: calc(var(--pixel-size) * 4);
  right: calc(var(--pixel-size) * 4);
  justify-content: flex-end;
}

.temple {
  top: calc(var(--pixel-size) * 25);
  width: 100%;
  justify-content: center;
}

.eden {
  top: calc(var(--pixel-size) * 1);
  left: calc(var(--pixel-size) * 4);
}

.hell {
  top: calc(var(--pixel-size) * 1);
  right: calc(var(--pixel-size) * 4);
  justify-content: flex-end;
}

.char {
  background-image: url('characters.png');
  background-size: calc(var(--pixel-size) * 20) calc(var(--pixel-size) * 27);
  height: calc(var(--pixel-size) * 9);
  width: calc(var(--pixel-size) * 4);
  display: inline-block;
  margin-right: calc(var(--pixel-size) * 1);
}

.char.animated {
  position: relative;
  animation: walk 0.3s steps(1) infinite;
}

@keyframes walk {
  0% {
    background-position-y: 50%;
  }
  50% {
    background-position-y: 100%;
  }
  100% {
    background-position-y: 50%;
  }
}

@keyframes move {
  0% {
    left: 0px;
  }
  50% {
    left: calc(var(--pixel-size) * 30);
  }
  100% {
    left: 0px;
  }
}

@keyframes flip {
  0% {
    transform: scaleX(1);
  }
  50% {
    transform: scaleX(-1);
  }
  100% {
    transform: scaleX(1);
  }
}

.temple .char:nth-child(2n):last-child,
.temple .char:only-child {
	margin-right: 0;
}

.devotee {
  background-position-x: 0%;
}

.saint {
  background-position-x: 100%;
}

.baal {
  background-position-x: 25%;
}

.marx {
  background-position-x: 75%;
}

.dissident {
  background-position-x: 50%;
}
